\hypertarget{classimage__processor_1_1PoseEstimator}{}\doxysection{image\+\_\+processor.\+Pose\+Estimator Class Reference}
\label{classimage__processor_1_1PoseEstimator}\index{image\_processor.PoseEstimator@{image\_processor.PoseEstimator}}
\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
def \mbox{\hyperlink{classimage__processor_1_1PoseEstimator_abbb6d2bfa316ece901b68f416bb1629d}{\+\_\+\+\_\+init\+\_\+\+\_\+}} (self, \mbox{\hyperlink{classimage__processor_1_1PoseEstimator_a61e56a12f8f31f57c08c89976e2c3fa5}{object\+\_\+points}}, \mbox{\hyperlink{classimage__processor_1_1PoseEstimator_a80fc886aafe32e370709bd007aceb88b}{object\+\_\+label}}, \mbox{\hyperlink{classimage__processor_1_1PoseEstimator_a6ffd632572523f70bf83fe4be331f57a}{path\+\_\+to\+\_\+models}})
\item 
def \mbox{\hyperlink{classimage__processor_1_1PoseEstimator_a3f8dc5432b8c9db705a40d12dda4327c}{draw\+\_\+registration\+\_\+result}} (self, source, target, transformation)
\item 
def \mbox{\hyperlink{classimage__processor_1_1PoseEstimator_a1376528c7e93f6b6df4aa49f28986e71}{preprocess\+\_\+point\+\_\+cloud}} (self, pcd, \mbox{\hyperlink{classimage__processor_1_1PoseEstimator_a32eb76a508dfaf105061158c54b0211d}{voxel\+\_\+size}})
\item 
def \mbox{\hyperlink{classimage__processor_1_1PoseEstimator_af980cc4fbb30d223b2ac8c0c1ae6951a}{prepare\+\_\+data}} (self, \mbox{\hyperlink{classimage__processor_1_1PoseEstimator_a32eb76a508dfaf105061158c54b0211d}{voxel\+\_\+size}}, \mbox{\hyperlink{classimage__processor_1_1PoseEstimator_a61e56a12f8f31f57c08c89976e2c3fa5}{object\+\_\+points}}, \mbox{\hyperlink{classimage__processor_1_1PoseEstimator_a6ffd632572523f70bf83fe4be331f57a}{path\+\_\+to\+\_\+models}}, \mbox{\hyperlink{classimage__processor_1_1PoseEstimator_a80fc886aafe32e370709bd007aceb88b}{object\+\_\+label}})
\item 
def \mbox{\hyperlink{classimage__processor_1_1PoseEstimator_a561d0f70494074de772a59aa9e96de0a}{execute\+\_\+global\+\_\+registration}} (self, source\+\_\+down, target\+\_\+down, source\+\_\+fpfh, target\+\_\+fpfh, \mbox{\hyperlink{classimage__processor_1_1PoseEstimator_a32eb76a508dfaf105061158c54b0211d}{voxel\+\_\+size}})
\item 
def \mbox{\hyperlink{classimage__processor_1_1PoseEstimator_ab123ff371828364ae0717076e74b3fa9}{refine\+\_\+registration}} (self, source, target, result\+\_\+ransac, \mbox{\hyperlink{classimage__processor_1_1PoseEstimator_a32eb76a508dfaf105061158c54b0211d}{voxel\+\_\+size}})
\item 
def \mbox{\hyperlink{classimage__processor_1_1PoseEstimator_ae59bd5680544421161619136d38c8896}{run\+\_\+pose\+\_\+estimation}} (self)
\end{DoxyCompactItemize}
\doxysubsection*{Public Attributes}
\begin{DoxyCompactItemize}
\item 
\mbox{\Hypertarget{classimage__processor_1_1PoseEstimator_a61e56a12f8f31f57c08c89976e2c3fa5}\label{classimage__processor_1_1PoseEstimator_a61e56a12f8f31f57c08c89976e2c3fa5}} 
\mbox{\hyperlink{classimage__processor_1_1PoseEstimator_a61e56a12f8f31f57c08c89976e2c3fa5}{object\+\_\+points}}
\begin{DoxyCompactList}\small\item\em detected object points from the depth sensor \end{DoxyCompactList}\item 
\mbox{\Hypertarget{classimage__processor_1_1PoseEstimator_a80fc886aafe32e370709bd007aceb88b}\label{classimage__processor_1_1PoseEstimator_a80fc886aafe32e370709bd007aceb88b}} 
\mbox{\hyperlink{classimage__processor_1_1PoseEstimator_a80fc886aafe32e370709bd007aceb88b}{object\+\_\+label}}
\begin{DoxyCompactList}\small\item\em object name \end{DoxyCompactList}\item 
\mbox{\Hypertarget{classimage__processor_1_1PoseEstimator_a6ffd632572523f70bf83fe4be331f57a}\label{classimage__processor_1_1PoseEstimator_a6ffd632572523f70bf83fe4be331f57a}} 
\mbox{\hyperlink{classimage__processor_1_1PoseEstimator_a6ffd632572523f70bf83fe4be331f57a}{path\+\_\+to\+\_\+models}}
\begin{DoxyCompactList}\small\item\em absolute path to the mesh folder \end{DoxyCompactList}\item 
\mbox{\Hypertarget{classimage__processor_1_1PoseEstimator_a58260da8f8413e3a605257a1d7f37a59}\label{classimage__processor_1_1PoseEstimator_a58260da8f8413e3a605257a1d7f37a59}} 
\mbox{\hyperlink{classimage__processor_1_1PoseEstimator_a58260da8f8413e3a605257a1d7f37a59}{do\+\_\+draw}}
\begin{DoxyCompactList}\small\item\em Set True to see intermediate point cloud plots. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{classimage__processor_1_1PoseEstimator_a32eb76a508dfaf105061158c54b0211d}\label{classimage__processor_1_1PoseEstimator_a32eb76a508dfaf105061158c54b0211d}} 
\mbox{\hyperlink{classimage__processor_1_1PoseEstimator_a32eb76a508dfaf105061158c54b0211d}{voxel\+\_\+size}}
\begin{DoxyCompactList}\small\item\em scaling factor to tune functions with \end{DoxyCompactList}\item 
\mbox{\Hypertarget{classimage__processor_1_1PoseEstimator_a4e386379547510f63b8d39a265104070}\label{classimage__processor_1_1PoseEstimator_a4e386379547510f63b8d39a265104070}} 
{\bfseries target\+\_\+fpfh}
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
\begin{DoxyVerb}Class to estimate the rotation of the objects.
\end{DoxyVerb}
 

\doxysubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{classimage__processor_1_1PoseEstimator_abbb6d2bfa316ece901b68f416bb1629d}\label{classimage__processor_1_1PoseEstimator_abbb6d2bfa316ece901b68f416bb1629d}} 
\index{image\_processor.PoseEstimator@{image\_processor.PoseEstimator}!\_\_init\_\_@{\_\_init\_\_}}
\index{\_\_init\_\_@{\_\_init\_\_}!image\_processor.PoseEstimator@{image\_processor.PoseEstimator}}
\doxysubsubsection{\texorpdfstring{\_\_init\_\_()}{\_\_init\_\_()}}
{\footnotesize\ttfamily def image\+\_\+processor.\+Pose\+Estimator.\+\_\+\+\_\+init\+\_\+\+\_\+ (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{object\+\_\+points,  }\item[{}]{object\+\_\+label,  }\item[{}]{path\+\_\+to\+\_\+models }\end{DoxyParamCaption})}

\begin{DoxyVerb}Initialize the PoseEstimator.

Args:
    object_points (list): List of object points.
    object_label (str): Label of the object.
    path_to_models (str): Path to the .stl meshes.
\end{DoxyVerb}
 

\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{classimage__processor_1_1PoseEstimator_a3f8dc5432b8c9db705a40d12dda4327c}\label{classimage__processor_1_1PoseEstimator_a3f8dc5432b8c9db705a40d12dda4327c}} 
\index{image\_processor.PoseEstimator@{image\_processor.PoseEstimator}!draw\_registration\_result@{draw\_registration\_result}}
\index{draw\_registration\_result@{draw\_registration\_result}!image\_processor.PoseEstimator@{image\_processor.PoseEstimator}}
\doxysubsubsection{\texorpdfstring{draw\_registration\_result()}{draw\_registration\_result()}}
{\footnotesize\ttfamily def image\+\_\+processor.\+Pose\+Estimator.\+draw\+\_\+registration\+\_\+result (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{source,  }\item[{}]{target,  }\item[{}]{transformation }\end{DoxyParamCaption})}

\begin{DoxyVerb}Draw the registration result.

Args:
    source (PointCloud): Source point cloud (detected one).
    target (PointCloud): Target point cloud (artificial extracted from the mesh).
    transformation (ndarray): Transformation matrix between the 2 point clouds.
\end{DoxyVerb}
 \mbox{\Hypertarget{classimage__processor_1_1PoseEstimator_a561d0f70494074de772a59aa9e96de0a}\label{classimage__processor_1_1PoseEstimator_a561d0f70494074de772a59aa9e96de0a}} 
\index{image\_processor.PoseEstimator@{image\_processor.PoseEstimator}!execute\_global\_registration@{execute\_global\_registration}}
\index{execute\_global\_registration@{execute\_global\_registration}!image\_processor.PoseEstimator@{image\_processor.PoseEstimator}}
\doxysubsubsection{\texorpdfstring{execute\_global\_registration()}{execute\_global\_registration()}}
{\footnotesize\ttfamily def image\+\_\+processor.\+Pose\+Estimator.\+execute\+\_\+global\+\_\+registration (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{source\+\_\+down,  }\item[{}]{target\+\_\+down,  }\item[{}]{source\+\_\+fpfh,  }\item[{}]{target\+\_\+fpfh,  }\item[{}]{voxel\+\_\+size }\end{DoxyParamCaption})}

\begin{DoxyVerb}Execute global registration using RANSAC.

Args:
    source_down (PointCloud): Downsampled source point cloud.
    target_down (PointCloud): Downsampled target point cloud.
    source_fpfh (ndarray): Source FPFH features.
    target_fpfh (ndarray): Target FPFH features.
    voxel_size (float): Voxel size.

Returns:
    RegistrationResult: Result of the global registration.
\end{DoxyVerb}
 \mbox{\Hypertarget{classimage__processor_1_1PoseEstimator_af980cc4fbb30d223b2ac8c0c1ae6951a}\label{classimage__processor_1_1PoseEstimator_af980cc4fbb30d223b2ac8c0c1ae6951a}} 
\index{image\_processor.PoseEstimator@{image\_processor.PoseEstimator}!prepare\_data@{prepare\_data}}
\index{prepare\_data@{prepare\_data}!image\_processor.PoseEstimator@{image\_processor.PoseEstimator}}
\doxysubsubsection{\texorpdfstring{prepare\_data()}{prepare\_data()}}
{\footnotesize\ttfamily def image\+\_\+processor.\+Pose\+Estimator.\+prepare\+\_\+data (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{voxel\+\_\+size,  }\item[{}]{object\+\_\+points,  }\item[{}]{path\+\_\+to\+\_\+models,  }\item[{}]{object\+\_\+label }\end{DoxyParamCaption})}

\begin{DoxyVerb}Generate the 2 point clouds as open3d friendly pointclouds and preprocess them by:
downsampling, estimate normals, extract FPFH features.

Args:
    voxel_size (float): Voxel size to scale hyper parameters.
    object_points (list): List of object points.
    path_to_models (str): Path to the .stl mesh.
    object_label (str): Label of the object.

Returns:
    tuple: Tuple containing the source, target, downsampled source and target, and FPFH features.
\end{DoxyVerb}
 \mbox{\Hypertarget{classimage__processor_1_1PoseEstimator_a1376528c7e93f6b6df4aa49f28986e71}\label{classimage__processor_1_1PoseEstimator_a1376528c7e93f6b6df4aa49f28986e71}} 
\index{image\_processor.PoseEstimator@{image\_processor.PoseEstimator}!preprocess\_point\_cloud@{preprocess\_point\_cloud}}
\index{preprocess\_point\_cloud@{preprocess\_point\_cloud}!image\_processor.PoseEstimator@{image\_processor.PoseEstimator}}
\doxysubsubsection{\texorpdfstring{preprocess\_point\_cloud()}{preprocess\_point\_cloud()}}
{\footnotesize\ttfamily def image\+\_\+processor.\+Pose\+Estimator.\+preprocess\+\_\+point\+\_\+cloud (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{pcd,  }\item[{}]{voxel\+\_\+size }\end{DoxyParamCaption})}

\begin{DoxyVerb}Preprocess the point cloud.

Args:
    pcd (PointCloud): Point cloud.
    voxel_size (float): Voxel size to scale hyper parameters.

Returns:
    tuple: Tuple containing the downsampled point cloud and FPFH features.
\end{DoxyVerb}
 \mbox{\Hypertarget{classimage__processor_1_1PoseEstimator_ab123ff371828364ae0717076e74b3fa9}\label{classimage__processor_1_1PoseEstimator_ab123ff371828364ae0717076e74b3fa9}} 
\index{image\_processor.PoseEstimator@{image\_processor.PoseEstimator}!refine\_registration@{refine\_registration}}
\index{refine\_registration@{refine\_registration}!image\_processor.PoseEstimator@{image\_processor.PoseEstimator}}
\doxysubsubsection{\texorpdfstring{refine\_registration()}{refine\_registration()}}
{\footnotesize\ttfamily def image\+\_\+processor.\+Pose\+Estimator.\+refine\+\_\+registration (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{source,  }\item[{}]{target,  }\item[{}]{result\+\_\+ransac,  }\item[{}]{voxel\+\_\+size }\end{DoxyParamCaption})}

\begin{DoxyVerb}Refine the registration using ICP.

Args:
    source (PointCloud): Source point cloud.
    target (PointCloud): Target point cloud.
    result_ransac (RegistrationResult): Result of the global registration.
    voxel_size (float): Voxel size.

Returns:
    RegistrationResult: refined registration result.
\end{DoxyVerb}
 \mbox{\Hypertarget{classimage__processor_1_1PoseEstimator_ae59bd5680544421161619136d38c8896}\label{classimage__processor_1_1PoseEstimator_ae59bd5680544421161619136d38c8896}} 
\index{image\_processor.PoseEstimator@{image\_processor.PoseEstimator}!run\_pose\_estimation@{run\_pose\_estimation}}
\index{run\_pose\_estimation@{run\_pose\_estimation}!image\_processor.PoseEstimator@{image\_processor.PoseEstimator}}
\doxysubsubsection{\texorpdfstring{run\_pose\_estimation()}{run\_pose\_estimation()}}
{\footnotesize\ttfamily def image\+\_\+processor.\+Pose\+Estimator.\+run\+\_\+pose\+\_\+estimation (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}

\begin{DoxyVerb}Run the pose estimation algorithm.

Returns:
    ndarray: Rotation matrix of the object.
\end{DoxyVerb}
 

The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
/home/sergio/ros\+\_\+ws/src/locosim/robot\+\_\+control/lab\+\_\+exercises/\+Fd\+R-\/group\+W/scripts/image\+\_\+processor.\+py\end{DoxyCompactItemize}
