\hypertarget{motion__processor_8cpp}{}\doxysection{/home/sergio/ros\+\_\+ws/src/locosim/robot\+\_\+control/lab\+\_\+exercises/\+Fd\+R-\/group\+W/src/motion\+\_\+processor.cpp File Reference}
\label{motion__processor_8cpp}\index{/home/sergio/ros\_ws/src/locosim/robot\_control/lab\_exercises/FdR-\/groupW/src/motion\_processor.cpp@{/home/sergio/ros\_ws/src/locosim/robot\_control/lab\_exercises/FdR-\/groupW/src/motion\_processor.cpp}}


Implementation of the R\+OS node motion\+\_\+processor, that we use to compute and send trajectories to the robot.  


{\ttfamily \#include \char`\"{}../include/motion\+\_\+processor.\+h\char`\"{}}\newline
{\ttfamily \#include $<$unistd.\+h$>$}\newline
Include dependency graph for motion\+\_\+processor.\+cpp\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{motion__processor_8cpp__incl}
\end{center}
\end{figure}
\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{motion__processor_8cpp_ac90dfe2dc0e6b956a79d0b6a645b7381}{recive\+\_\+jstate}} (const sensor\+\_\+msgs\+::\+Joint\+State \&joint\+State\+\_\+msg)
\begin{DoxyCompactList}\small\item\em Callback function used for reading current joint\+States from the /ur5/joint\+\_\+states topic. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{motion__processor_8cpp_a2aad0cb6a7fb99c0dd9a80a0d5c42bf7}{callback\+\_\+instructions\+\_\+sub}} (const lab\+\_\+group\+\_\+w\+::\+Robot\+Instructions \&msg)
\begin{DoxyCompactList}\small\item\em Callback function used for reading the next position information received on the /task\+\_\+planner/robot\+\_\+instructions custom topic. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{motion__processor_8cpp_aaf591b655d921bc117810edea2991812}{set\+\_\+positions}} (double p0, double p1, double p2)
\begin{DoxyCompactList}\small\item\em Set the positions in the \char`\"{}\+Robot\+Instructions\char`\"{} message using the information we received from the task planner node (\mbox{\hyperlink{task__planner_8cpp}{task\+\_\+planner.\+cpp}}) \end{DoxyCompactList}\item 
void \mbox{\hyperlink{motion__processor_8cpp_ad0bbc65543990144b4987c3ae1bf0434}{set\+\_\+rotations}} (double r0\+\_\+0, double r0\+\_\+1, double r0\+\_\+2, double r1\+\_\+0, double r1\+\_\+1, double r1\+\_\+2, double r2\+\_\+0, double r2\+\_\+1, double r2\+\_\+2)
\begin{DoxyCompactList}\small\item\em Set the rotations in the \char`\"{}\+Robot\+Instructions\char`\"{} message using the information we received from the task planner node (\mbox{\hyperlink{task__planner_8cpp}{task\+\_\+planner.\+cpp}}) \end{DoxyCompactList}\item 
Matrix\+Xd \mbox{\hyperlink{motion__processor_8cpp_af5cc352b26fafb43e43feb9946218c4d}{get\+\_\+trajectory}} ()
\begin{DoxyCompactList}\small\item\em Function used to obtain the trajectory we want to follow, based on the information received from the task planner node (\mbox{\hyperlink{task__planner_8cpp}{task\+\_\+planner.\+cpp}}) \end{DoxyCompactList}\item 
\mbox{\Hypertarget{motion__processor_8cpp_a3c04138a5bfe5d72780bb7e82a18e627}\label{motion__processor_8cpp_a3c04138a5bfe5d72780bb7e82a18e627}} 
int {\bfseries main} (int argc, char $\ast$$\ast$argv)
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
Implementation of the R\+OS node motion\+\_\+processor, that we use to compute and send trajectories to the robot. 

joint\+State\+\_\+msgte\+\_\+msg 

\doxysubsection{Function Documentation}
\mbox{\Hypertarget{motion__processor_8cpp_a2aad0cb6a7fb99c0dd9a80a0d5c42bf7}\label{motion__processor_8cpp_a2aad0cb6a7fb99c0dd9a80a0d5c42bf7}} 
\index{motion\_processor.cpp@{motion\_processor.cpp}!callback\_instructions\_sub@{callback\_instructions\_sub}}
\index{callback\_instructions\_sub@{callback\_instructions\_sub}!motion\_processor.cpp@{motion\_processor.cpp}}
\doxysubsubsection{\texorpdfstring{callback\_instructions\_sub()}{callback\_instructions\_sub()}}
{\footnotesize\ttfamily void callback\+\_\+instructions\+\_\+sub (\begin{DoxyParamCaption}\item[{const lab\+\_\+group\+\_\+w\+::\+Robot\+Instructions \&}]{msg }\end{DoxyParamCaption})}



Callback function used for reading the next position information received on the /task\+\_\+planner/robot\+\_\+instructions custom topic. 


\begin{DoxyParams}{Parameters}
{\em msg} & Robot\+Instructions message received from the task planner node (\mbox{\hyperlink{task__planner_8cpp}{task\+\_\+planner.\+cpp}}) \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{motion__processor_8cpp_af5cc352b26fafb43e43feb9946218c4d}\label{motion__processor_8cpp_af5cc352b26fafb43e43feb9946218c4d}} 
\index{motion\_processor.cpp@{motion\_processor.cpp}!get\_trajectory@{get\_trajectory}}
\index{get\_trajectory@{get\_trajectory}!motion\_processor.cpp@{motion\_processor.cpp}}
\doxysubsubsection{\texorpdfstring{get\_trajectory()}{get\_trajectory()}}
{\footnotesize\ttfamily Matrix\+Xd get\+\_\+trajectory (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Function used to obtain the trajectory we want to follow, based on the information received from the task planner node (\mbox{\hyperlink{task__planner_8cpp}{task\+\_\+planner.\+cpp}}) 

\begin{DoxyReturn}{Returns}
Eigen\+::\+Matrix\+Xd matrix containing the trajectory we\textquotesingle{}ll send to the robot 
\end{DoxyReturn}
\mbox{\Hypertarget{motion__processor_8cpp_ac90dfe2dc0e6b956a79d0b6a645b7381}\label{motion__processor_8cpp_ac90dfe2dc0e6b956a79d0b6a645b7381}} 
\index{motion\_processor.cpp@{motion\_processor.cpp}!recive\_jstate@{recive\_jstate}}
\index{recive\_jstate@{recive\_jstate}!motion\_processor.cpp@{motion\_processor.cpp}}
\doxysubsubsection{\texorpdfstring{recive\_jstate()}{recive\_jstate()}}
{\footnotesize\ttfamily void recive\+\_\+jstate (\begin{DoxyParamCaption}\item[{const sensor\+\_\+msgs\+::\+Joint\+State \&}]{joint\+State\+\_\+msg\+\_\+sim }\end{DoxyParamCaption})}



Callback function used for reading current joint\+States from the /ur5/joint\+\_\+states topic. 


\begin{DoxyParams}{Parameters}
{\em joint\+State\+\_\+msg\+\_\+sim} & message obtained from the topic \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{motion__processor_8cpp_aaf591b655d921bc117810edea2991812}\label{motion__processor_8cpp_aaf591b655d921bc117810edea2991812}} 
\index{motion\_processor.cpp@{motion\_processor.cpp}!set\_positions@{set\_positions}}
\index{set\_positions@{set\_positions}!motion\_processor.cpp@{motion\_processor.cpp}}
\doxysubsubsection{\texorpdfstring{set\_positions()}{set\_positions()}}
{\footnotesize\ttfamily void set\+\_\+positions (\begin{DoxyParamCaption}\item[{double}]{p0,  }\item[{double}]{p1,  }\item[{double}]{p2 }\end{DoxyParamCaption})}



Set the positions in the \char`\"{}\+Robot\+Instructions\char`\"{} message using the information we received from the task planner node (\mbox{\hyperlink{task__planner_8cpp}{task\+\_\+planner.\+cpp}}) 

Set the positions in the \char`\"{}\+Robot\+Instructions\char`\"{} message we\textquotesingle{}ll send to the motion node.


\begin{DoxyParams}{Parameters}
{\em p0} & X \\
\hline
{\em p1} & Y \\
\hline
{\em p2} & Z \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{motion__processor_8cpp_ad0bbc65543990144b4987c3ae1bf0434}\label{motion__processor_8cpp_ad0bbc65543990144b4987c3ae1bf0434}} 
\index{motion\_processor.cpp@{motion\_processor.cpp}!set\_rotations@{set\_rotations}}
\index{set\_rotations@{set\_rotations}!motion\_processor.cpp@{motion\_processor.cpp}}
\doxysubsubsection{\texorpdfstring{set\_rotations()}{set\_rotations()}}
{\footnotesize\ttfamily void set\+\_\+rotations (\begin{DoxyParamCaption}\item[{double}]{r0\+\_\+0,  }\item[{double}]{r0\+\_\+1,  }\item[{double}]{r0\+\_\+2,  }\item[{double}]{r1\+\_\+0,  }\item[{double}]{r1\+\_\+1,  }\item[{double}]{r1\+\_\+2,  }\item[{double}]{r2\+\_\+0,  }\item[{double}]{r2\+\_\+1,  }\item[{double}]{r2\+\_\+2 }\end{DoxyParamCaption})}



Set the rotations in the \char`\"{}\+Robot\+Instructions\char`\"{} message using the information we received from the task planner node (\mbox{\hyperlink{task__planner_8cpp}{task\+\_\+planner.\+cpp}}) 

Set the rotations in the \char`\"{}\+Robot\+Instructions\char`\"{} message we\textquotesingle{}ll send to the motion node (saved as a Rotation matrix)


\begin{DoxyParams}{Parameters}
{\em r0\+\_\+0} & \\
\hline
{\em r0\+\_\+1} & \\
\hline
{\em r0\+\_\+2} & \\
\hline
{\em r1\+\_\+0} & \\
\hline
{\em r1\+\_\+1} & \\
\hline
{\em r1\+\_\+2} & \\
\hline
{\em r2\+\_\+0} & \\
\hline
{\em r2\+\_\+1} & \\
\hline
{\em r2\+\_\+2} & \\
\hline
\end{DoxyParams}
